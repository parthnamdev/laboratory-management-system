<%- include("partials/header"); -%> 

<div class="custom-padding">

     <h1 class="mb-4">Company Details</h1>
   <form action="/profile" method="post" >

    <% if(profile == {}) { %>
    <div class="row">
     <div class="mb-3 col-lg-4 col-md-6">
       <label for="name" class="form-label">Name</label>
       <input type="text" class="form-control" id="name" name="name" required>
     </div>
     <div class="mb-3 col-lg-4 col-md-6">
       <label for="number" class="form-label">Number</label>
       <input type="number" class="form-control" id="number" min="1000000000" max="9999999999" name="number" required>
     </div>
     <div class="mb-3 col-lg-4 col-md-6">
       <label for="email" class="form-label">Email-id</label>
       <input type="email" class="form-control" id="email" name="email" required>
     </div>
     
     <div class="mb-3 col-lg-4 col-md-6">
      <label for="formFile" class="form-label">Company logo</label>
      <input class="form-control" name="media" type="file" id="formFile" required>
    </div>
    </div>
    <div class="mb-3 col-lg-4 col-md-6">
      <label for="address" class="form-label">Address</label>
      <textarea class="form-control" id="address" name="address" rows="3" required></textarea>
    </div>

  <% } else { %>
     <div class="row">
     <div class="mb-3 col-lg-4 col-md-6">
       <label for="name" class="form-label">Name</label>
       <input type="text" class="form-control" id="name" name="name" value="<%= profile.name %>" required>
     </div>
     <div class="mb-3 col-lg-4 col-md-6">
       <label for="number" class="form-label">Number</label>
       <input type="number" class="form-control" id="number" name="number" min="1000000000" max="9999999999" value="<%= profile.number %>" required>
     </div>
     <div class="mb-3 col-lg-4 col-md-6">
       <label for="email" class="form-label">Email-id</label>
       <input type="email" class="form-control" id="email" name="email" value="<%= profile.email %>" required>
     </div>
     
     
    </div>
    
    <div class="mb-3 col-lg-4 col-md-6">
      <label for="address" class="form-label">Address</label>
      <textarea class="form-control" id="address" name="address" rows="3" value="" required><%= profile.address %></textarea>
    </div>
  <% } %>
    
      <button class="btn btn-dark btn-lg my-4" type="submit" id="submitBtn">Save</button>
    </form>
    <h1 class="my-4">Change logo</h1>
    <form action="/updateImage" method="post" enctype="multipart/form-data">
         <div>
          <div class="mb-3 col-lg-4 col-md-6">
               <label for="formFile" class="form-label">Company logo</label>
               <input class="form-control" name="media" type="file" id="formFile" required>
             </div>
             <% if(profile && profile.logo) { %>
              <img src="data:<%= profile.mimetype %>;base64,<%= profile.logo %>" alt="" class="col-lg-3 col-md-6 col-12">
              <% } %>
              
             
          <div>
            <button class="btn btn-dark btn-lg my-4" type="submit" id="submitBtn">Update Image</button>
          </div>
         </div>
    </form>
</div>



<input type="hidden" value="<%= alert %>" id="alert-value">
      <button type="button" class="btn btn-primary d-none" id="alert-btn" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
        Alert
      </button>
      
      <!-- Modal -->
      <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Alert!</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <%= alert %>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ok</button>
            </div>
          </div>
        </div>
      </div>
      <script>
        window.onload = () => {
          if(document.getElementById('alert-value').value.length > 0) {
          console.log('hello');
            document.getElementById('alert-btn').click();
        }
        }
      </script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</body>


</html>